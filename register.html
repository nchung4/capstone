<!doctype html>
<html lang="en">

    <head>
        <title>Title</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1,
            shrink-to-fit=no">

        <!-- Bootstrap CSS v5.2.1 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
            crossorigin="anonymous">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Poppins:wght@200;300;400&display=swap"
            rel="stylesheet">

        <!-- axios -->


        <!-- FontAwesome 6.2.0 CSS -->
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
            integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="../css/style.css">
    </head>

    <body>
        <div class="mb-3">
            <input type="email" class="form-control" id="email"
                placeholder="email">
        </div>
        <div class="mb-3">
            <input type="password" class="form-control" id="password"
                placeholder="password">
        </div>
        <div class="mb-3">
            <input type="password" class="form-control" id="confirmPassword"
                placeholder="password confirm">
        </div>
        <div class="mb-3">
            <input type="text" class="form-control" id="name"
                placeholder="name">
        </div>
        <div class="mb-3">
            <input type="text" class="form-control" id="phone"
                placeholder="phone">
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" id="male" name="gender"
                value="Male">
            <label class="form-check-label" for="male">
                Male
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" id="female"
                name="gender" value="Female" checked>
            <label class="form-check-label" for="female">
                Female
            </label>
        </div>
        <div class="btn btn-success" id="submitBtn">SUBMIT</div>

        <script>
        const submitBtn = document.getElementById('submitBtn');

        submitBtn.addEventListener('click', async () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const isMale = document.getElementById('male').checked; // Get the value of the "male" radio button
            const isFemale = document.getElementById('female').checked; // Get the value of the "female" radio button
            const gender = isMale ? true : isFemale ? false : null; // Map the values to boolean
            const userData = {
                email,
                password,
                confirmPassword,
                name,
                phone,
                gender
            };

            try {
                const apiUrl = 'https://shop.cyberlearn.vn/api/Users/signup';
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userData)
                });

                const data = await response.json();
                console.log('Registration response:', data);

                // Handle success or display errors to the user
                if (data.statusCode === 200) {
            alert('Registration successful!');
            // Redirect to another page or perform other actions
        } else if (data.statusCode === 400 && data.message === "Email đã được sử dụng!") {
            alert('Registration failed. Email has already been used.');
        } else {
            alert('Registration failed. Please check the provided information.');
        }
            } catch (error) {
                console.error('Error during registration:', error);
            }
        });
    </script>
        <!-- Bootstrap JavaScript Libraries -->
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous">
        </script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
            integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
            crossorigin="anonymous">
        </script>
        <!-- axios -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"
            integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="../index.js"></script>

    </body>

</html>